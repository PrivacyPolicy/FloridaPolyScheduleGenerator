var classes = [
    new Class(0, "", "Applied Cryptogrphy", 3,
        [
            {
                day: 1,
                start: {h: 15, m: 0},
                end: {h: 16, m: 15}
            },
            {
                day: 3,
                start: {h: 15, m: 0},
                end: {h: 16, m: 15}
            }
        ],
        "Kettani, Houssain",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(1, "", "Applied Cryptogrphy", 3,
        [
            {
                day: 2,
                start: {h: 15, m: 0},
                end: {h: 16, m: 15}
            },
            {
                day: 4,
                start: {h: 15, m: 0},
                end: {h: 16, m: 15}
            }
        ],
        "Kettani, Houssain",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(2, "", "Computer Architecture and Organization", 3,
        [
            {
                day: 1,
                start: {h: 10, m: 0},
                end: {h: 11, m: 50}
            },
            {
                day: 3,
                start: {h: 10, m: 0},
                end: {h: 11, m: 50}
            }
        ],
        "Foster, David",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(3, "", "Computer Architecture and Organization", 3,
        [
            {
                day: 1,
                start: {h: 16, m: 0},
                end: {h: 17, m: 50}
            },
            {
                day: 3,
                start: {h: 16, m: 0},
                end: {h: 17, m: 50}
            }
        ],
        "Foster, David",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(4, "", "Computer Programming 2", 3,
        [
            {
                day: 1,
                start: {h: 8, m: 0},
                end: {h: 9, m: 50}
            },
            {
                day: 3,
                start: {h: 10, m: 0},
                end: {h: 11, m: 50}
            }
        ],
        "Bushey, Dean",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(5, "", "Computer Programming 2", 3,
        [
            {
                day: 1,
                start: {h: 12, m: 0},
                end: {h: 13, m: 50}
            },
            {
                day: 3,
                start: {h: 12, m: 0},
                end: {h: 13, m: 50}
            }
        ],
        "Bushey, Dean",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(5, "", "Computer Programming 2", 3,
        [
            {
                day: 1,
                start: {h: 18, m: 0},
                end: {h: 19, m: 50}
            },
            {
                day: 3,
                start: {h: 18, m: 0},
                end: {h: 19, m: 50}
            }
        ],
        "Staff",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(6, "", "Database 1", 3,
        [
            {
                day: 1,
                start: {h: 10, m: 30},
                end: {h: 11, m: 45}
            },
            {
                day: 3,
                start: {h: 10, m: 30},
                end: {h: 11, m: 45}
            }
        ],
        "Staab, Jennifer",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(7, "", "Database 1", 3,
        [
            {
                day: 2,
                start: {h: 10, m: 30},
                end: {h: 11, m: 45}
            },
            {
                day: 4,
                start: {h: 10, m: 30},
                end: {h: 11, m: 45}
            }
        ],
        "Yang, Feng Jen",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(8, "", "Database 1", 3,
        [
            {
                day: 2,
                start: {h: 12, m: 00},
                end: {h: 13, m: 15}
            },
            {
                day: 4,
                start: {h: 12, m: 00},
                end: {h: 13, m: 15}
            }
        ],
        "Samarah, Mohammad",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(9, "", "Design I", 3,
        [
            {
                day: 2,
                start: {h: 16, m: 30},
                end: {h: 17, m: 20}
            },
            {
                day: 5,
                start: {h: 10, m: 30},
                end: {h: 13, m: 50}
            }
        ],
        "Elish, Karim",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(10, "", "Engineering & Technology Project Management", 3,
        [
            {
                day: 2,
                start: {h: 18, m: 0},
                end: {h: 19, m: 15}
            },
            {
                day: 4,
                start: {h: 18, m: 00},
                end: {h: 19, m: 15}
            }
        ],
        "Mennie, Jim",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(11, "", "Engineering & Technology Project Management", 3,
        [
            {
                day: 2,
                start: {h: 16, m: 30},
                end: {h: 17, m: 45}
            },
            {
                day: 4,
                start: {h: 16, m: 30},
                end: {h: 17, m: 45}
            }
        ],
        "Mennie, Jim",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(12, "", "Engineering & Technology Project Management", 3,
        [
            {
                day: 1,
                start: {h: 12, m: 0},
                end: {h: 14, m: 30}
            }
        ],
        "Shaikh, Shoaib",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(13, "", "Engineering & Technology Project Management", 3,
        [
            {
                day: 2,
                start: {h: 16, m: 30},
                end: {h: 17, m: 45}
            },
            {
                day: 4,
                start: {h: 16, m: 30},
                end: {h: 17, m: 45}
            }
        ],
        "Staff",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(14, "", "Legal, Ethical, and Management Issues in Technology", 3,
        [
            {
                day: 2,
                start: {h: 8, m: 0},
                end: {h: 9, m: 15}
            },
            {
            day: 4,
                start: {h: 8, m: 00},
                end: {h: 9, m: 15}
            }
        ],
        "Mennie, Jim",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(15, "", "Machine Learning", 3,
        [
            {
                day: 2,
                start: {h: 10, m: 30},
                end: {h: 11, m: 45}
            },
            {
                day: 4,
                start: {h: 10, m: 30},
                end: {h: 11, m: 45}
            }
        ],
        "Rashad, Sherif Said",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(16, "", "Programming Languages", 3,
        [
            {
                day: 2,
                start: {h: 13, m: 30},
                end: {h: 14, m: 45}
            },
            {
                day: 4,
                start: {h: 13, m: 30},
                end: {h: 14, m: 45}
            }
        ],
        "Jaimes, Luis",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(17, "", "Programming Languages", 3,
        [
            {
                day: 1,
                start: {h: 15, m: 0},
                end: {h: 16, m: 15}
            },
            {
                day: 3,
                start: {h: 15, m: 00},
                end: {h: 16, m: 15}
            }
        ],
        "Bushey, Dean",
        "", "", "", 30, 10, [], [], -1, ""
    ),
    new Class(17, "", "Software Security Testing", 3,
        [
            {
                day: 2,
                start: {h: 9, m: 0},
                end: {h: 10, m: 15}
            },
            {
                day: 4,
                start: {h: 9, m: 00},
                end: {h: 10, m: 15}
            }
        ],
        "Bushey, Dean",
        "", "", "", 30, 10, [], [], -1, ""
    )
];

// elective gruops
var electiveGroups = new ElectiveGroups();
// construct electiveGroups
var options = new Options();
options.setClassPreference(2, pref.required);
options.setClassPreference(4, pref.required);
options.setClassPreference(5, pref.unfavored);
options.setCreditMin(12);
options.setCreditMax(18);
options.setCreditFavoredValue(15);
options.setHideDing(true);

var preProcessFilter = function(theClass) {
    // contains an unacceptable professor
    if (options.professors[theClass.professor] == pref.unacceptable &&
            options.professors[theClass.professor] != null) {
        return false;
    }
    // is during an unacceptable time
    for (var i = 0; i < theClass.times.length; i++) {
        for (var j = 0; j < options.timesNeutral.length; j++) {
            var aTime = theClass.times[i],
                bTime = options.timesNeutral[j],
                aStart = aTime.start.h * 100 + aTime.start.m,
                aEnd = aTime.end.h * 100 + aTime.end.m,
                bStart = bTime.start.h * 100 + bTime.start.m,
                bEnd = bTime.end.h * 100 + bTime.end.m;
            if (aTime.day == bTime.day) {
                if (aStart < bStart || aEnd > bEnd) {
                    return false;
                }
            }
        }
    }
    // is an unnaceptable class (currently disabled)

    // not in major/concentration (currently disabled)

    // prerequisites haven't been taken (currently disabled)

    // already taken (currently disabled)

    // on an unacceptable campus (currently disabled)

    // in an unacceptable class room (currently disabled)

    // TODO: check if a past elective was taken
    if (options.multipleElectives) {
        // ...
    }

    // class is full
    if (options.hideFullClasses && theClass.seatsLeft < 1) {
        return false;
    }
    // if it gets this far, the class is fine
    return true;
};
var processFilter = function(classes, schedule) {
    // not over or under the credit limit
    if (schedule.calculateCredits() >
            options.creditRange.maxValue) {
        return false;
    }
    // ensure there are no two electives together
    var lastClass = schedule.classes._classes[
        schedule.classes._classes.length - 1];
    var g1 = electiveGroups.groupIDForClass(lastClass);
    for (var i = 0; i < schedule.classes._classes.length - 2; i++) {
        var g2 = electiveGroups.groupIDForClass(
            schedule.classes._classes[i]);
        if (g2 != -1 && g1 == g2) {
            return false;
        }
    }
    // TODO: do something about same-course addition
    if (/* this new class has the same course as another :0*/false) {
        return false;
    }
    return true;
};
var postProcessFilter = function(classes, schedule) {
    // doesn't meet the credit minimum
    if (schedule.calculateCredits().credits <
            options.creditRange.minValue) {
        return false;
    }
    // doesn't contain the required classes
    for (var i = 0; i < options.classesRequired.length; i++) {
        var reqID = options.classesRequired[i];
        if (schedule.classes.get(reqID) != null) {
            return false;
        }
    }
    // if co-requisite classes don't both exist
    if (!options.allowHalfCoRequisites) {
        for (var i = 0; i < classes._classes.length; i++) {
            var coreqs = classes._classes[i].coReqs;
            for (var j = 0; j < coreqs.length; j++) {
                if (classes._classes[i].indexOf(coreqs[j]) < 0) {
                    return false;
                }
            }
        }
    }
    // IF there are redundant schedules, this is where they'd disappear
    return true;
};

var list = new ClassList();
list._classes = classes;
var generator = new ScheduleGenerator(list, options,
    preProcessFilter, processFilter, postProcessFilter);
console.log("About to calculate schedules...");
var schedules = generator.generateSchedules();
console.log("Finished!");
console.log(schedules);
